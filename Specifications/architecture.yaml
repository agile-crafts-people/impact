$schema: "https://github.com/agile-learning-institute/stage0/blob/main/Schemas/architecture.schema.yaml"
$id: "https://github.com/agile-learning-institute/mentorhub/blob/main/Specifications/architecture.yaml"
title: Architecture Specification for Mentor Hub

architecture:
  organization: Agile Learning Institute
  product: Mentor Hub
  environments:
    - name: local
    - name: development
    - name: staging
    - name: production
  domains:
    - name: runbook
      description: SRE Automation using Stage0 Runbook System for operational automation
      repos:
        - name: runbook_api
          description: Runbook Automation API Server
          template: agile-learning-institute/stage0_template_runbook_api
          publish: make
          type: api
          port: 8383
        - name: runbook_spa
          description: Runbook Automation Single Page Web Application (utility container, not a real repository)
          template: N/A
          type: spa_ref
          port: 8384
    - name: schema
      description: MongoDB Database Configuration and Management.
      repos:
        - name: mongodb_api
          description: MongoDB Configurator API Server
          template: agile-learning-institute/stage0_template_configurator_api
          publish: make
          type: api
          port: 8385
        - name: configurator_spa
          description: MongoDB Configurator SPA (utility container, not a real repository)
          template: N/A
          type: spa_ref 
          port: 8386
    - name: common_code
      description: Shared code used across multiple API or SPA code bases are published to private dependency management libraries (NPM /PYPI).
      repos:
        - name: api_utils
          description: Python PyPI API Utility Library
          template: agile-learning-institute/stage0_template_py_utils
          publish: pipenv
          type: api
          port: 8387
        - name: spa_utils
          description: Vue NPM SPA Utility Library
          template: agile-learning-institute/stage0_template_vue_utils
          publish: npm
          type: spa
          port: 8388
    - name: profile
      description: User Profile Management.
      data_domains:
        controls:
          - Profile
          - Platform
          - User
        creates: []
        consumes:
          - Identity
      repos:
        - name: profile_api
          description: Consumes Identity Service Bus events and manages Profile data.
          template: agile-crafts-people/template_flask_mongo
          port: 8186
        - name: profile_spa
          description: Profile API Status Single Page Web Application
          template: agile-crafts-people/template_vue_vuetify
          port: 8187
    - name: evaluator
      description: Sentiment Analysis Prompt and Model evaluation tool
      data_domains:
        controls:
          - TestRun
          - TestData
        creates:
          - Grade
        consumes:
          - Profile
      repos:
        - name: evaluator_api
          description: Evaluator API Server
          template: agile-crafts-people/template_flask_mongo
          port: 8188
        - name: evaluator_spa
          description: Evaluator Single Page Web Application - setup/schedule/run/view test results
          template: agile-crafts-people/template_vue_vuetify
          port: 8189
    - name: dashboard
      description: YouTube Ratio Reporting - Product MVP.
      data_domains:
        controls:
          - Dashboard
        creates:
          - Post
          - Comment
        consumes:
          - Classification
          - Profile
      repos:
        - name: dashboard_api
          description: Dashboard API Server
          template: agile-crafts-people/template_flask_mongo
          port: 8190
        - name: dashboard_spa
          description: Dashboard Single Page Web Application
          template: agile-crafts-people/template_vue_vuetify
          port: 8191
    - name: classifier
      description: Comment Sentiment Analysis and Classifier 
      data_domains:
        controls:
          - sentiment
          - ratios
        creates: []
        consumes:
          - post
          - comment
          - user
      repos:
        - name: classifier_api
          description: Sentiment Analysis Classifier API Server
          template: agile-crafts-people/template_flask_mongo
          port: 8192
        - name: classifier_spa
          description: Sentiment Analysis Classifier Single Page Web Application
          template: agile-crafts-people/template_vue_vuetify
          port: 8193